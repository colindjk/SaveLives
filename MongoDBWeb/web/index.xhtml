<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui">

    <h:head>
        <title>MongoDB Web</title>

        <!-- 
        The following <meta> viewport element must be included in all your web pages so that your user
        interface scales down to fit to the screen sizes of smartphones, tablets, and other mobile devices.
        -->
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <script src="//maps.google.com/maps/api/js?key=AIzaSyDUMWJdnV_fekj5InNCV82_hBq_gKWG8lw" type="text/javascript" />
        <script src="#{application.contextPath}/resources/js/markerclusterer.js" type="text/javascript"/>
        <script>
            function clusterMarkers() {
                var mcOptions = {gridSize: 50, maxZoom: 15, imagePath: 'http://localhost:8080/MongoDBWeb/resources/images/m'};
                var mc = new MarkerClusterer(PF('map').map, PF('map').map.markers, mcOptions);
                PF('map').map.fitBounds = google.maps.Map.prototype.fitBounds;
            }
            $(window).load(function () {
                clusterMarkers();
            });
        </script>
    </h:head>
    <h:body>
        <div style="text-align: center">
            <h:link outcome="CreateAccount" styleClass="arialTen">
                <i class="fa fa-home">&nbsp;</i>Create Account
            </h:link>&nbsp;&nbsp;
            <h:link outcome="SignIn" styleClass="arialTen">
                <i class="fa fa-home">&nbsp;</i>Sign In
            </h:link>&nbsp;&nbsp;
        </div>
        <p:panel>
            <p:gmap id="gmap" center="39.288752, -76.613069" zoom="13" disableDefaultUI="true" 
                    widgetVar="map" model="#{crimeCaseController.crimeModel}" 
                    type="HYBRID" style="width:100%;height:500px" />
        </p:panel>
        <p:panel>
            <h:form>
                <h:panelGrid columns="2" cellpadding="1">
                    <p:outputLabel for="restricted1" value="From:" />
                    <p:calendar id="restricted1" value="#{crimeCaseController.date1}" mindate="1/1/12" maxdate="2/18/17" />

                    <p:outputLabel for="restricted2" value="To:" />
                    <p:calendar id="restricted2" value="#{crimeCaseController.date2}" mindate="1/1/12" maxdate="2/18/17" />

                </h:panelGrid>
                <p:commandButton value="Submit" update="gmap" actionListener="#{crimeCaseController.submit()}" 
                                 oncomplete="clusterMarkers();">

                </p:commandButton>
            </h:form>
        </p:panel>

    </h:body>
</html>